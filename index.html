<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.css" />
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Rubik:400,700' type='text/css'>
    <style>
      #map {
        height: 100%;
      }
    </style>
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.js"></script>
    <script src="vendor/tile.stamen.js"></script>
    <script>
      $(function() {
        var map = L.map('map').setView([41.89, -87.61], 12);

        var layer = new L.StamenTileLayer("toner-lite");
        map.addLayer(layer);

        $.ajax({
          url: 'http://www.divvybikes.com/stations/json/',
          success: function (data) {
            var stationList = data.stationBeanList;
            $.each(stationList, function(i, station) {
              var availableBikes = station.availableBikes;
              var availableDocks = station.availableDocks;
              var stationName = station.stationName;
              var latitude = station.latitude;
              var longitude = station.longitude;

              if (availableBikes === 0) {
                L.marker([latitude, longitude]).addTo(map)
                  .bindPopup('Zero bikes at ' + stationName + '!');
              } else if (availableDocks === 0) {
                L.marker([latitude, longitude]).addTo(map)
                  .bindPopup('Zero bikes at ' + stationName + '!');
              };
            });
          }
        });
      });
    </script>
  </head>
  <body>
    <div id="map"></div>
  </body>
</html>
